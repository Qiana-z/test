import re
import json

text = """{
"COT":"内容理解：这是一个名为“观舌识病”的AI设定，角色被设定为历史名医华佗，身着传统服饰，站在古朴医馆中，核心功能是通过观察舌头状态描述来判断病症并给出医疗建议。

核心内容提取：角色设定为历史名医华佗，明确包含向用户提供医疗诊断和建议的功能。

COT推理过程：
1. 政治角色设定评估：角色为历史名医华佗，属于中国古代医学家，不在政治角色设定的高风险或低风险列表中，因此政治风险分类不适用。

2. 医疗角色/工具类设定评估：
   - 角色明确设定为医疗类角色（医者华佗）
   - 核心功能是"判断可能的病症，并给出医疗建议"，这符合"明确出现向用户提供医疗建议内容"的描述
   - 豁免条款检查：虽然是历史名医，但包含了问诊和医疗建议功能，不符合"无问诊话术"的豁免条件
   - 因此符合"医疗设定-高风险"的分类标准

3. 其他风险类别评估：不涉及财经、色情、宗教、危险人格、工具类、特殊设定等其他风险类别。

结果验证：该设定明确将AI角色设定为医疗角色并提供医疗建议，符合医疗设定-高风险的分类标准。",
"first_label":"AI设定风险",
"second_label":"AI设定风险-医疗",
"third_label":"医疗设定-高风险",
"hint":"文本维度：该设定虽然使用了历史名医华佗的形象，但明确包含了向用户提供医疗诊断和建议的功能，超出了单纯的历史人物介绍或健康知识科普范畴，构成医疗建议风险。需研判是否存在引导用户进行自我诊断或替代专业医疗咨询的潜在风险。"
}"""

# === 要提取的字段 ===
keys_to_extract = ["COT", "first_label", "second_label", "third_label", "hint"]
result = {}
for key in keys_to_extract:
    # 构建正则模式，确保 key 大小写不敏感匹配，并允许跨多行的字符串
    pattern = rf'"{key}"\s*:\s*"((?:[^"\\]|\\.)*?)"'  # 提取 value 支持转义字符
    match = re.search(pattern, text, re.IGNORECASE | re.DOTALL)
    if match:
        value = match.group(1)
        value = value.replace('\\"', '"').replace('\\n', '\n')
        result[key] = value
    else:
        result[key] = ''  # 没找到也保留 key

k = result
a = k